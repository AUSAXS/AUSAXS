# basic setup
output output/rigidbody/LAR1-2-full/
load {
	pdb data/rigidbody/LAR1-2-full/LAR1-2-full.pdb
	saxs data/rigidbody/LAR1-2-full/LAR1-2-full.dat
	split 7 99 199 292
}
autoconstrain linear

# prepare for optimization
save initial_state.pdb
save trajectory.xyz
parameter_strategy {
	iterations 100
	translate 10
	rotate 3
}

# main script
print "Initial chi2: {chi2_no_penalty}"
loop 100
	optimize_once
		on_improvement 
			print {
				msg "{iteration}/{iterations_total}: Accepted with new chi2 {chi2_no_penalty}"
				colour green
			}
			save curve_%.fit
			save trajectory.xyz
		end
	end
end
save final_state.pdb
